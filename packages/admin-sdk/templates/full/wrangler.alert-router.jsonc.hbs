{
  "$schema": "./node_modules/wrangler/config-schema.json",
  "name": "{{projectSlug}}-alert-router",
  "main": "workers/platform-alert-router.ts",
  "compatibility_date": "2026-01-01",
  "compatibility_flags": ["nodejs_compat_v2"],
  "observability": { "enabled": true },

  "d1_databases": [
    {
      "binding": "PLATFORM_DB",
      "database_name": "{{projectSlug}}-metrics",
      "database_id": "YOUR_D1_DATABASE_ID"
    }
  ],

  "kv_namespaces": [
    {
      "binding": "PLATFORM_CACHE",
      "id": "YOUR_KV_NAMESPACE_ID"
    },
    {
      "binding": "PLATFORM_ALERTS",
      "id": "YOUR_KV_ALERTS_NAMESPACE_ID"
    },
    {
      "binding": "SERVICE_REGISTRY",
      "id": "YOUR_SERVICE_REGISTRY_KV_ID"
    }
  ],

  "queues": {
    "producers": [
      { "binding": "PLATFORM_TELEMETRY", "queue": "{{projectSlug}}-telemetry" }
    ]
  },

  "services": [
    { "binding": "NOTIFICATIONS_API", "service": "{{projectSlug}}-notifications" }
  ],

  "vars": {
    "CLOUDFLARE_ACCOUNT_ID": "YOUR_CLOUDFLARE_ACCOUNT_ID"
  }

  // Secrets needed (set via wrangler secret put):
  //   SLACK_WEBHOOK_URL
  //   GITHUB_TOKEN
}
