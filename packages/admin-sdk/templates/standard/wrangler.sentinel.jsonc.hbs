{
  "$schema": "./node_modules/wrangler/config-schema.json",
  "name": "{{projectSlug}}-sentinel",
  "main": "workers/platform-sentinel.ts",
  "compatibility_date": "2026-01-01",
  "compatibility_flags": ["nodejs_compat_v2"],
  "observability": { "enabled": true },

  // Cron: 15-minute gap detection + cost spike monitoring
  "triggers": {
    "crons": ["*/15 * * * *"]
  },

  "d1_databases": [
    {
      "binding": "PLATFORM_DB",
      "database_name": "{{projectSlug}}-metrics",
      "database_id": "YOUR_D1_DATABASE_ID"
    }
  ],

  "kv_namespaces": [
    {
      "binding": "PLATFORM_CACHE",
      "id": "YOUR_KV_NAMESPACE_ID"
    },
    {
      "binding": "PLATFORM_ALERTS",
      "id": "YOUR_KV_ALERTS_NAMESPACE_ID"
    }
  ],

  "services": [
    { "binding": "ERROR_COLLECTOR", "service": "{{projectSlug}}-error-collector" }
  ],

  "vars": {
    "CLOUDFLARE_ACCOUNT_ID": "YOUR_CLOUDFLARE_ACCOUNT_ID",
    "GATUS_HEARTBEAT_URL": "{{gatusUrl}}"
  }

  // Secrets needed (set via wrangler secret put):
  //   CLOUDFLARE_API_TOKEN
  //   SLACK_WEBHOOK_URL (optional)
}
